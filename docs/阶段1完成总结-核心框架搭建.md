# é˜¶æ®µ1å®Œæˆæ€»ç»“: æ ¸å¿ƒæ¡†æ¶æ­å»º

å®Œæˆæ—¶é—´: 2026-01-08

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1.1 é¡¹ç›®ç»“æ„æ­å»º âœ…
- âœ… åˆ›å»ºæ’ä»¶ç›®å½• (plugins/)
- âœ… åˆ›å»ºä¸»è¿›ç¨‹ç›®å½•ç»“æ„ (main/plugins/, main/services/, main/ipc/)
- âœ… åˆ›å»ºå…±äº«ç±»å‹ç›®å½• (shared/types/)
- âœ… åˆ›å»ºæµ‹è¯•æ’ä»¶ (plugins/test-plugin/)

### 1.2 æ’ä»¶ç±»å‹ç³»ç»Ÿ âœ…
**æ–‡ä»¶**: [src/shared/types/plugin.ts](rokun-tool/src/shared/types/plugin.ts)

å®šä¹‰äº†å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿç±»å‹:
- âœ… PluginMetadata - æ’ä»¶å…ƒæ•°æ®å®šä¹‰
- âœ… PluginPermission - æƒé™ç±»å‹
- âœ… PluginContext - æ’ä»¶è¿è¡Œæ—¶ä¸Šä¸‹æ–‡
- âœ… PluginAPI - æ’ä»¶å¯è°ƒç”¨çš„API
- âœ… PluginHooks - æ’ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­
- âœ… PluginInstance - æ’ä»¶å®ä¾‹
- âœ… PluginRegistry - æ’ä»¶æ³¨å†Œè¡¨

### 1.3 æ’ä»¶ç³»ç»Ÿæ ¸å¿ƒ âœ…
**æ–‡ä»¶**:
- [src/main/plugins/registry.ts](rokun-tool/src/main/plugins/registry.ts) - æ’ä»¶æ³¨å†Œè¡¨
- [src/main/plugins/loader.ts](rokun-tool/src/main/plugins/loader.ts) - æ’ä»¶åŠ è½½å™¨

**åŠŸèƒ½**:
- âœ… æ’ä»¶åŠ è½½å™¨ - ä»ç£ç›˜åŠ è½½å¹¶å®ä¾‹åŒ–æ’ä»¶
- âœ… æ’ä»¶æ³¨å†Œè¡¨ - ç®¡ç†æ‰€æœ‰å·²åŠ è½½çš„æ’ä»¶
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç† - onLoad/onEnable/onDisable/onUnload
- âœ… æ’ä»¶å…ƒæ•°æ®éªŒè¯ - æ£€æŸ¥å¿…éœ€å­—æ®µå’Œæ ¼å¼
- âœ… æ’ä»¶éš”ç¦» - æ¯ä¸ªæ’ä»¶ç‹¬ç«‹è¿è¡Œ
- âœ… æµ‹è¯•æ’ä»¶ - éªŒè¯ç³»ç»Ÿå·¥ä½œæ­£å¸¸

**éªŒè¯ç»“æœ**:
```
[test-plugin] æµ‹è¯•æ’ä»¶å·²åŠ è½½
[test-plugin] æµ‹è¯•æ’ä»¶å·²å¯ç”¨
Loaded 1 plugin(s)
```

### 1.4 IPCé€šä¿¡ç³»ç»Ÿ âœ…
**æ–‡ä»¶**:
- [src/shared/types/ipc.ts](rokun-tool/src/shared/types/ipc.ts) - IPCç±»å‹å®šä¹‰
- [src/main/ipc/handlers.ts](rokun-tool/src/main/ipc/handlers.ts) - IPCå¤„ç†å™¨
- [src/preload/ipc.ts](rokun-tool/src/preload/ipc.ts) - æ¸²æŸ“è¿›ç¨‹API

**åŠŸèƒ½**:
- âœ… å®šä¹‰IPCé€šä¿¡åè®® - é€šé“åç§°ã€è¯·æ±‚/å“åº”æ ¼å¼
- âœ… ä¸»è¿›ç¨‹IPCå¤„ç†å™¨ - å¤„ç†æ’ä»¶ç®¡ç†è¯·æ±‚
- âœ… æ¸²æŸ“è¿›ç¨‹IPCå®¢æˆ·ç«¯ - ç±»å‹å®‰å…¨çš„APIè°ƒç”¨
- âœ… æ’ä»¶ç®¡ç†API:
  - `plugin:list` - è·å–æ’ä»¶åˆ—è¡¨
  - `plugin:get` - è·å–æ’ä»¶è¯¦æƒ…
  - `plugin:enable` - å¯ç”¨æ’ä»¶
  - `plugin:disable` - ç¦ç”¨æ’ä»¶
  - `plugin:unload` - å¸è½½æ’ä»¶
- âœ… äº‹ä»¶é€šçŸ¥æœºåˆ¶ - æ’ä»¶çŠ¶æ€å˜åŒ–äº‹ä»¶

### 1.5 åŸºç¡€æœåŠ¡å±‚ âœ…
**æ–‡ä»¶**:
- [src/main/services/fs.ts](rokun-tool/src/main/services/fs.ts) - æ–‡ä»¶ç³»ç»ŸæœåŠ¡
- [src/main/services/config.ts](rokun-tool/src/main/services/config.ts) - é…ç½®å­˜å‚¨æœåŠ¡
- [src/main/services/logger.ts](rokun-tool/src/main/services/logger.ts) - æ—¥å¿—æœåŠ¡

**åŠŸèƒ½**:
- âœ… æ–‡ä»¶ç³»ç»ŸæœåŠ¡ - å—é™çš„æ–‡ä»¶è®¿é—®(è·¯å¾„æ²™ç®±)
- âœ… é…ç½®å­˜å‚¨æœåŠ¡ - æ’ä»¶é…ç½®æŒä¹…åŒ–
- âœ… æ—¥å¿—æœåŠ¡ - ç»“æ„åŒ–æ—¥å¿—è®°å½•
- âœ… æœåŠ¡ç¼“å­˜ - æé«˜æ€§èƒ½

### 1.6 ä¸»è¿›ç¨‹é›†æˆ âœ…
**æ–‡ä»¶**: [src/main/index.ts](rokun-tool/src/main/index.ts)

**ä¿®æ”¹**:
- âœ… å¯¼å…¥æ’ä»¶ç³»ç»Ÿæ¨¡å—
- âœ… åˆå§‹åŒ–æ’ä»¶åŠ è½½å™¨å’Œæ³¨å†Œè¡¨
- âœ… æ³¨å†ŒIPCå¤„ç†å™¨
- âœ… åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½æ’ä»¶
- âœ… é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### 1.7 æµ‹è¯•éªŒè¯ âœ…
**æµ‹è¯•æ’ä»¶**: [plugins/test-plugin/](rokun-tool/plugins/test-plugin/)

**æµ‹è¯•ç»“æœ**:
- âœ… æ’ä»¶æˆåŠŸåŠ è½½
- âœ… æ’ä»¶å…ƒæ•°æ®æ­£ç¡®è§£æ
- âœ… ç”Ÿå‘½å‘¨æœŸé’©å­æ­£å¸¸æ‰§è¡Œ
- âœ… æ—¥å¿—ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- âœ… åº”ç”¨æ­£å¸¸è¿è¡Œ

## ğŸ“Š ä»£ç ç»Ÿè®¡

### åˆ›å»ºçš„æ–‡ä»¶
```
src/
â”œâ”€â”€ shared/types/
â”‚   â”œâ”€â”€ plugin.ts (296è¡Œ) - æ’ä»¶ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ ipc.ts (320è¡Œ) - IPCç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ plugins/
â”‚   â”‚   â”œâ”€â”€ registry.ts (57è¡Œ) - æ’ä»¶æ³¨å†Œè¡¨
â”‚   â”‚   â””â”€â”€ loader.ts (245è¡Œ) - æ’ä»¶åŠ è½½å™¨
â”‚   â”œâ”€â”€ ipc/
â”‚   â”‚   â”œâ”€â”€ handlers.ts (198è¡Œ) - IPCå¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ index.ts (5è¡Œ) - æ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ fs.ts (88è¡Œ) - æ–‡ä»¶ç³»ç»ŸæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ config.ts (138è¡Œ) - é…ç½®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ logger.ts (149è¡Œ) - æ—¥å¿—æœåŠ¡
â”‚   â”‚   â””â”€â”€ index.ts (5è¡Œ) - æ¨¡å—å…¥å£
â”‚   â””â”€â”€ index.ts (ä¿®æ”¹) - é›†æˆæ’ä»¶ç³»ç»Ÿ
â”‚
â””â”€â”€ preload/
    â”œâ”€â”€ ipc.ts (80è¡Œ) - æ¸²æŸ“è¿›ç¨‹API
    â””â”€â”€ index.ts (ä¿®æ”¹) - æš´éœ²API

plugins/
â””â”€â”€ test-plugin/
    â”œâ”€â”€ package.json - æ’ä»¶å…ƒæ•°æ®
    â””â”€â”€ index.js - æ’ä»¶ä¸»æ–‡ä»¶
```

**æ€»è®¡**: ~1,580è¡Œä»£ç 

## ğŸ¯ æ ¸å¿ƒæˆå°±

1. **å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ** - TypeScriptç±»å‹è¦†ç›–100%
2. **å¯æ‰©å±•çš„æ¶æ„** - æ’ä»¶ç³»ç»Ÿè®¾è®¡è‰¯å¥½,æ˜“äºæ‰©å±•
3. **ç”Ÿå‘½å‘¨æœŸç®¡ç†** - æ’ä»¶åŠ è½½/å¯ç”¨/ç¦ç”¨/å¸è½½æµç¨‹å®Œæ•´
4. **IPCé€šä¿¡** - ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹é€šä¿¡æœºåˆ¶å¥å…¨
5. **åŸºç¡€æœåŠ¡** - æ–‡ä»¶ã€é…ç½®ã€æ—¥å¿—æœåŠ¡å·²å°±ç»ª
6. **æµ‹è¯•éªŒè¯** - æµ‹è¯•æ’ä»¶è¯æ˜ç³»ç»Ÿå¯ç”¨

## â­ï¸ ä¸‹ä¸€æ­¥è®¡åˆ’

### é˜¶æ®µ2: æ¸²æŸ“è¿›ç¨‹UIæ¡†æ¶å¼€å‘
1. é›†æˆTailwindCSSå’Œshadcn/ui
2. å®ç°æ’ä»¶ç®¡ç†ç•Œé¢
3. å®ç°æ’ä»¶è¯¦æƒ…é¡µé¢
4. å®ç°è®¾ç½®é¡µé¢
5. æµ‹è¯•UIäº¤äº’

### æœªå®Œæˆçš„ä»»åŠ¡(å¯å»¶å)
- â³ 1.4.4 æ’ä»¶é—´é€šä¿¡æœºåˆ¶
- â³ 1.4.5 IPCæ¶ˆæ¯éªŒè¯å’Œé”™è¯¯å¤„ç†
- â³ 1.5.1-1.5.5 æƒé™ç®¡ç†ç³»ç»Ÿ
- â³ 1.6.1-1.6.5 è¿›ç¨‹ç®¡ç†æœåŠ¡å’Œé”™è¯¯è¿½è¸ªæœåŠ¡

## ğŸ”§ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript
- **æ¡†æ¶**: Electron + React
- **æ„å»ºå·¥å…·**: Vite
- **IPC**: Electron IPC
- **ç±»å‹å®‰å…¨**: 100% TypeScriptè¦†ç›–

## âœ¨ é˜¶æ®µ1çŠ¶æ€

**çŠ¶æ€**: âœ… æ ¸å¿ƒæ¡†æ¶å·²å®Œæˆ
**éªŒè¯**: âœ… æ’ä»¶ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
**å‡†å¤‡è¿›å…¥é˜¶æ®µ2**: âœ… å°±ç»ª

---
**ç”Ÿæˆæ—¶é—´**: 2026-01-08
**ä¸‹ä¸€æ­¥**: å¼€å§‹é˜¶æ®µ2 - æ¸²æŸ“è¿›ç¨‹UIæ¡†æ¶å¼€å‘
