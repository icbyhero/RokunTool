# 变更: 全面UI优化 - 暗色模式和样式一致性

## 为什么

当前UI在暗色模式下存在严重的可访问性问题,部分文本颜色硬编码为黑色,导致在深色背景上无法看见。此外,插件权限列表的视觉风格不统一,不同状态的徽章组件没有遵循统一的设计语言。这些问题降低了用户体验,使应用在暗色模式下难以使用。

## 变更内容

- **破坏性变更**: 无 - 这是一个纯粹的UI/UX改进

- 修复所有硬编码文本颜色以正确支持暗色模式
  - 将 `text-gray-900`、`text-black` 替换为暗色模式感知的样式类
  - 确保所有文本都有正确的 `dark:` 变体
  - 审计所有UI组件的暗色模式兼容性

- 标准化徽章变体和视觉层次
  - 统一权限状态(已授权、已拒绝、待处理)的徽章样式
  - 确保所有徽章变体都有正确的暗色模式支持
  - 为状态指示器创建一致的视觉语言

- 审计并修复UI组件不一致性
  - 审查所有UI组件的主题支持
  - 确保在明暗两种模式下都有正确的对比度
  - 修复在暗色模式下效果不佳的悬停状态和过渡效果

- 建立UI主题规范
  - 记录颜色使用模式
  - 创建可复用的暗色模式工具模式
  - 确保所有新组件都遵循主题最佳实践

- 创建项目UI设计系统文档
  - 编写完整的UI设计规范文档 ([docs/UI-DESIGN-SYSTEM.md](../../docs/UI-DESIGN-SYSTEM.md))
  - 定义颜色、排版、间距等标准
  - 建立组件开发指南和审查清单
  - 确保所有开发者(包括AI助手)都遵循规范

## 影响范围

- 影响的规范:
  - `specs/ui-theme/spec.md` (新规范)

- 影响的代码:
  - `rokun-tool/src/renderer/src/components/ui/*.tsx` (所有UI组件)
  - `rokun-tool/src/renderer/src/components/pages/PluginDetail.tsx` (权限徽章)
  - `rokun-tool/src/renderer/src/components/pages/*.tsx` (所有页面组件)
  - `rokun-tool/src/renderer/src/App.tsx` (Toast通知)
  - 其他包含硬编码颜色的组件

- 收益:
  - 改善暗色模式的可访问性
  - 所有UI元素的视觉设计保持一致
  - 为暗色模式用户提供更好的体验
  - 通过既定模式更容易维护
  - 为AI助手和人类开发者提供明确的UI开发指南
  - 防止未来引入类似的UI问题
